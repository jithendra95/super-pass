<div class="password-container">
  <div class="password-list">
    <div class="password-header">
      <!-- <input placeholder="Search" type="text" class="search-input" /> -->

      <div class="searchBar">
        <input id="searchQueryInput" type="text" name="searchQueryInput" placeholder="Search" value="" />
        <button id="searchQuerySubmit" type="submit" name="searchQuerySubmit">
          <svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#666666" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
          </svg>
        </button>
      </div>
      
      <button mat-button color="secondary"><mat-icon>filter_alt</mat-icon></button>
      <button mat-button color="secondary">
        <mat-icon (click)="openDialog()">add</mat-icon>
      </button>
    </div>

    <div>
      <mat-list>
        <mat-list-item
          [ngClass]="item.name === selected?.name ? 'selected' : ''"
          *ngFor="let item of passwordState.getList$() | async; let i = index"
          (click)="select(item, i)"
        >
          <mat-icon mat-list-icon>folder</mat-icon>
          <div mat-line>{{ item.name }}</div>
          <div
            mat-line
            *ngIf="item.type != passwordType.CreditCard"
            class="sub-line"
          >
            {{ item.username }}
          </div>
          <div
            mat-line
            *ngIf="item.type == passwordType.CreditCard"
            class="sub-line"
          >
            {{ item.cardNo }}
          </div>
        </mat-list-item>
      </mat-list>
    </div>
  </div>
  <mat-divider [vertical]="true"></mat-divider>

  <div class="password-detail" *ngIf="selected">
    <div class="header">
      <div class="logo">{{selected?.name![0]}}</div>

      <div class="name">
        <div class="title">{{ selected?.name }}</div>
        <div class="vault">{{ vaultState.get(selected!.vault)?.name }}</div>
      </div>
      <div>
        <mat-icon (click)="edit()">edit</mat-icon>
        <mat-icon (click)="delete()">delete</mat-icon>
        <mat-icon (click)="favourite()" [ngClass]="selected?.favourite? 'fav': ''">star</mat-icon>
      </div>
    </div>

    <mat-card class="card">
      <mat-card-content class="add-card">
        <!--Account-->
        <div *ngIf="selected?.type == passwordType.Account">
          <div>
            <div class="label">Username</div>
            <div>{{ selected?.username }}</div>
          </div>

          <div class="password-field">
            <div class="field-value">
              <div class="label">Password</div>
              <div>**********</div>
            </div>

            <button
              mat-icon-button
              color="primary"
              aria-label="Copy Password to Clipboard"
              (click)="copyToClipBoard(selected?.password)"
            >
              <mat-icon>content_copy</mat-icon>
            </button>
          </div>

          <div>
            <div class="label">Website</div>
            <div>{{ selected?.website }}</div>
          </div>
        </div>

        <!--Credit Card-->
        <div *ngIf="selected?.type == passwordType.CreditCard">
          <div>
            <div class="label">Card No</div>
            <div>{{ selected?.cardNo }}</div>
          </div>

          <div>
            <div class="label">Card Holder</div>
            <div>{{ selected?.username }}</div>
          </div>

          <div class="password-field">
            <div class="field-value">
              <div class="label">CVC</div>
              <div>***</div>
            </div>

            <button
              mat-icon-button
              color="primary"
              aria-label="Copy Password to Clipboard"
              (click)="copyToClipBoard(selected?.cvc)"
            >
              <mat-icon>content_copy</mat-icon>
            </button>
          </div>

          <div class="password-field">
            <div class="field-value">
              <div class="label">Pin</div>
              <div>****</div>
            </div>

            <button
              mat-icon-button
              color="primary"
              aria-label="Copy Password to Clipboard"
              (click)="copyToClipBoard(selected?.bankPin)"
            >
              <mat-icon>content_copy</mat-icon>
            </button>
          </div>
        </div>

        <!--Bank Account-->
        <div *ngIf="selected?.type == passwordType.Bank">
          <div>
            <div class="label">Account No</div>
            <div>{{ selected?.bankAccountNo }}</div>
          </div>

          <div>
            <div class="label">Account Holder</div>
            <div>{{ selected?.username }}</div>
          </div>

          <div>
            <div class="label">Bank Branch</div>
            <div>{{ selected?.bankBranch }}</div>
          </div>

          <div>
            <div class="label">Debit Card No</div>
            <div>{{ selected?.cardNo }}</div>
          </div>

          <div class="password-field">
            <div class="field-value">
              <div class="label">Pin</div>
              <div>****</div>
            </div>

            <button
              mat-icon-button
              color="primary"
              aria-label="Copy Password to Clipboard"
              (click)="copyToClipBoard(selected?.bankPin)"
            >
              <mat-icon>content_copy</mat-icon>
            </button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <div class="default-content">
      <div>
        <div class="label">Created Date</div>
        <div class="text">{{ selected?.createdDate }}</div>
      </div>

      <div>
        <div class="label">Modified Date</div>
        <div class="text">{{ selected?.updatedDate }}</div>
      </div>
    </div>
  </div>
</div>
